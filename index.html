<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–µ–∫—Ç 1430 - –ì.–í. –ö–∏—Å—É–Ω—å–∫–æ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen">
        <div class="project-logo">
            <div class="radar-icon"></div>
        </div>
        <div class="title-typewriter" id="titleTypewriter"></div>
        <div class="subtitle-loading">
            <span class="loading-dots">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞—Ä—Ö–∏–≤–∞</span>
        </div>
        <div class="menu-buttons" id="menuButtons">
            <div class="menu-group" id="questMenuGroup">
                <button class="menu-btn" type="button" id="questMainBtn" onclick="continueQuest()">–¢–ï–ö–°–¢–û–í–´–ô –ö–í–ï–°–¢</button>
                <div class="menu-note hidden" id="questProgressNote" aria-live="polite"></div>
                <button class="menu-btn menu-btn-secondary hidden" type="button" id="questRestartBtn" onclick="restartQuest()">–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û</button>
            </div>
            <!-- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º —Ä–µ–∂–∏–º Tower Defense –≤ "–ü–æ–ª–∏–≥–æ–Ω –ò—Å–ø—ã—Ç–∞–Ω–∏–π" -->
            <button class="menu-btn" type="button" onclick="startDefense()">–ü–û–õ–ò–ì–û–ù –ò–°–ü–´–¢–ê–ù–ò–ô</button>
            <button class="menu-btn" type="button" onclick="startGallery()">–ì–ê–õ–ï–†–ï–Ø</button>
        </div>
        <div class="menu-footer" id="menuFooter">–ê–≤—Ç–æ—Ä—ã: –ú–∞—Ä—ã–∫–∏–Ω –¢–∏–º–æ—Ñ–µ–π –∏ –ú–∞–∫—Å–∏–º –¢—Ä—É—à–∏–Ω ‚Ä¢ –ü—Ä–æ–µ–∫—Ç 1430</div>
    </div>

    <!-- Main Application -->
    <div id="app">
        <button class="back-btn" type="button" onclick="returnToMenu()">‚Üê –ú–ï–ù–Æ</button>
        
        <!-- Quest Mode -->
        <div id="questMode" class="hidden">
            <div class="quest-container" id="questContainer"></div>
        </div>

        <!-- Tower Defense Mode -->
        <div id="defenseMode" class="hidden">
            <div class="defense-container">
                <div class="game-header">
                    <!-- –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–µ–∂–∏–º–∞ –æ–±–æ—Ä–æ–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–æ–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º -->
                    <h2 class="mode-title">–ü–û–õ–ò–ì–û–ù –ò–°–ü–´–¢–ê–ù–ò–ô</h2>
                    <div class="stats">
                        <div class="stat-item">
                            <span class="stat-label">–ó–¥–æ—Ä–æ–≤—å–µ:</span>
                            <span class="stat-value" id="health">100</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–†–µ—Å—É—Ä—Å—ã:</span>
                            <span class="stat-value" id="resources">1000</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–í–æ–ª–Ω–∞:</span>
                            <span class="stat-value" id="wave">1</span>
                        </div>
                    </div>
                </div>

                <!-- –£–¥–∞–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã width/height, —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Ä—ã –∑–∞–¥–∞–≤–∞–ª–∏—Å—å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ CSS –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
                <canvas id="gameCanvas" class="game-canvas"></canvas>

                <div class="tower-panel" id="towerPanel"></div>

                <div id="historicalFact" class="historical-fact hidden">
                    <div class="fact-title" id="factTitle"></div>
                    <div class="fact-content">
                        <div class="fact-text fact-collapsed" id="factContent"></div>
                        <button class="fact-toggle" id="factToggle" type="button" aria-expanded="false">–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ</button>
                    </div>
                    <button class="menu-btn next-wave-btn" type="button" onclick="nextWave()">–°–õ–ï–î–£–Æ–©–ê–Ø –í–û–õ–ù–ê</button>
                </div>
            </div>
        </div>

        <!-- Gallery Mode -->
        <div id="galleryMode" class="hidden">
            <div class="gallery-container" id="galleryContainer"></div>
        </div>
    </div>

    <!-- Sound Controls (collapsed by default; expands on click) -->
    <div class="sound-controls" id="soundControls">
        <button class="help-btn" id="helpBtn" type="button" aria-label="–°–ø—Ä–∞–≤–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ">‚ùî</button>
        <button class="sound-panel-toggle" id="soundPanelToggle" type="button" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–∞">üîä</button>
        <div class="sound-panel-body" id="soundPanelBody" aria-hidden="true">
            <button class="sound-toggle" type="button" onclick="toggleSound()" id="soundBtn" aria-pressed="false">üîá –ó–í–£–ö: –í–´–ö–õ</button>
            <div class="volume-control">
                <label for="volumeSlider">–ì—Ä–æ–º–∫–æ—Å—Ç—å:</label>
                <input id="volumeSlider" type="range" class="volume-slider" min="0" max="100" value="50" oninput="changeVolume(this.value)">
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>